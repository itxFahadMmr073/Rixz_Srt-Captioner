<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Rixz ‚Äì SRT Subtitle Maker</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <!-- Custom -->
  <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>
<body class="bg-dark text-light">

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-dark glassy fixed-top">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="#home">
        <img src="{{ url_for('static', filename='logo.png') }}" alt="Rixz" class="brand-logo me-2">
        <span>Rixz</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div id="nav" class="collapse navbar-collapse">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
          <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HEADER / HERO -->
  <header id="home" class="hero pt-6 pb-4">
    <div class="container text-center position-relative">
      <!-- decorative 4k-style gif accents (swap with your favorites) -->
      <img class="hero-gif left" src="https://i.imgur.com/3fJ1d7y.gif" alt="">
      <img class="hero-gif right" src="https://i.imgur.com/3fJ1d7y.gif" alt="">

      <div class="d-flex flex-column align-items-center">
        <div class="d-flex align-items-center brand-row text-secondary">
          <i class="bi bi-type brand-icon"></i>
          <h1 class="h2 mb-0 brand-title text-secondary">SRT Subtitle Maker</h1>
        </div>
        <p class="lead mb-2 mt-2 text-secondary">Turn your scripts into professional <b>.srt</b> subtitles with timestamps.</p>
        <span class="badge bg-gradient px-3 py-2">üî• Designed by <b>Rixz</b></span>
      </div>
    </div>
  </header>

  <main class="container my-5">

    <!-- ALERTS -->
    {% if error %}
      <div class="alert alert-danger alert-dismissible fade show glassy-soft" role="alert">
        <i class="bi bi-x-circle-fill me-1"></i>{{ error }}
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert"></button>
      </div>
    {% endif %}
    {% if success %}
      <div class="alert alert-success alert-dismissible fade show glassy-soft" role="alert">
        <i class="bi bi-check-circle-fill me-1"></i>{{ success }}
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert"></button>
      </div>
    {% endif %}

    <div class="row g-4">
      <!-- LEFT: SCRIPT INPUT -->
      <div class="col-lg-6">
        <div class="card glassy h-100 border-0">
          <div class="card-header d-flex align-items-center justify-content-between glassy-soft">
            <div class="d-flex align-items-center">
              <i class="bi bi-pencil-square icon-sm me-2"></i>
              <h5 class="mb-0">1) Paste Script ‚úçÔ∏è</h5>
            </div>
            <span class="text-muted small">Tips: Sentences work best</span>
          </div>
          <div class="card-body">
            <form action="{{ url_for('generate') }}" method="post">
              <div class="mb-3">
                <textarea class="form-control form-control-dark" id="script-input" name="script" rows="12" placeholder="Paste your script here‚Ä¶">{{ script or '' }}</textarea>
              </div>

              <div class="row g-3">
                <div class="col-md-6 col-lg-4">
                  <label class="form-label">Split by</label>
                  <select class="form-select form-select-dark" name="split_mode">
                    <option value="auto" {% if split_mode=='auto' %}selected{% endif %}>Auto</option>
                    <option value="sentences" {% if split_mode=='sentences' %}selected{% endif %}>Sentences</option>
                    <option value="newlines" {% if split_mode=='newlines' %}selected{% endif %}>Newlines</option>
                  </select>
                </div>
                <div class="col-md-6 col-lg-4">
                  <label class="form-label">Duration (sec)</label>
                  <input class="form-control form-control-dark" type="number" step="0.1" min="0.5" name="duration" value="{{ duration or 2.5 }}">
                </div>
                <div class="col-md-6 col-lg-4">
                  <label class="form-label">Gap (ms)</label>
                  <input class="form-control form-control-dark" type="number" step="50" min="0" name="gap" value="{{ gap or 200 }}">
                </div>
                <div class="col-md-6 col-lg-4">
                  <label class="form-label">Start (ms)</label>
                  <input class="form-control form-control-dark" type="number" step="100" min="0" name="start" value="{{ start or 0 }}">
                </div>
                <div class="col-md-6 col-lg-8">
                  <label class="form-label">Filename</label>
                  <input class="form-control form-control-dark" type="text" name="filename" value="{{ filename or 'subtitles.srt' }}">
                </div>
              </div>

              <div class="d-grid gap-2 mt-4">
                <button class="btn btn-accent btn-lg d-inline-flex align-items-center" type="submit">
                  <i class="bi bi-magic me-2"></i><span>Generate SRT</span>
                </button>
                <button class="btn btn-outline-light btn-lg d-inline-flex align-items-center" type="button" onclick="clearInput()">
                  <i class="bi bi-x-circle me-2"></i><span>Clear Input</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- RIGHT: PREVIEW + DOWNLOAD -->
      <div class="col-lg-6">
        <div class="card glassy h-100 border-0">
          <div class="card-header d-flex align-items-center justify-content-between glassy-soft">
            <div class="d-flex align-items-center">
              <i class="bi bi-eye icon-sm me-2"></i>
              <h5 class="mb-0">2) Preview & Download üëÄ</h5>
            </div>
            <button class="btn btn-outline-light btn-sm d-inline-flex align-items-center" id="btn-copy" type="button">
              <i class="bi bi-clipboard me-1"></i><span>Copy</span>
            </button>
          </div>
          <div class="card-body">
            <form action="{{ url_for('download') }}" method="post">
              <textarea class="form-control form-control-dark mono" rows="10" id="srt-output" name="srt_text" readonly>{{ srt_text or '' }}</textarea>
              <input type="hidden" name="filename" value="{{ filename or 'subtitles.srt' }}">
              <div class="d-grid gap-2 mt-3">
                <button class="btn btn-success btn-lg d-inline-flex align-items-center" type="submit" {% if not srt_text %}disabled{% endif %}>
                  <i class="bi bi-download me-2"></i><span>Download .srt</span>
                </button>
                <button class="btn btn-danger btn-lg d-inline-flex align-items-center" type="button" onclick="clearOutput()">
                  <i class="bi bi-trash me-2"></i><span>Clear Output</span>
                </button>
              </div>
            </form>
            {% if not srt_text %}
              <div class="text-muted small mt-3">
                üëâ Your SRT preview will appear here after you click <b>Generate</b>.
              </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    <!-- SERVICES -->
    <section id="services" class="mt-5">
      <div class="row g-4">
        <div class="col-md-4">
          <div class="card glassy h-100 text-center p-3">
            <div class="display-6 mb-2">üìù</div>
            <h5>Auto Sentence Split</h5>
            <p class="text-muted">Smartly splits your script into readable subtitles.</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card glassy h-100 text-center p-3">
            <div class="display-6 mb-2">‚è±Ô∏è</div>
            <h5>Timing Controls</h5>
            <p class="text-muted">Fine-tune duration, gaps, and start offsets with ease.</p>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card glassy h-100 text-center p-3">
            <div class="display-6 mb-2">üíæ</div>
            <h5>One-Click Download</h5>
            <p class="text-muted">Instant .srt export compatible with popular editors.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- MINI MUSIC PLAYER -->
    <section class="mt-5">
      <div class="card glassy border-0">
        <div class="card-header glassy-soft d-flex align-items-center justify-content-between">
          <h5 class="mb-0">Mini Music Player üéß</h5>
          <div class="d-flex align-items-center">
            <label class="me-2">Mood:</label>
            <select id="mood" class="form-select form-select-dark form-select-sm" style="width:auto">
              <option value="lofi">Chill Lofi</option>
              <option value="focus">Deep Focus</option>
              <option value="upbeat">Upbeat Energy</option>
            </select>
          </div>
        </div>
        <div class="card-body">
          <!-- MINI MUSIC PLAYER -->
<section class="my-5 text-center">
  <h5 class="mb-3">Mini Music Player üéß</h5>
  <div class="d-flex justify-content-center">
    <div class="mini-player shadow" style="max-width:380px; width:100%;">
      <iframe 
        width="100%" 
        height="200" 
        src="https://www.youtube.com/embed/jfKfPfyJRdk?rel=0&modestbranding=1&controls=0" 
        title="lofi beats"
        frameborder="0" 
        style="border-radius:12px;" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
        allowfullscreen>
      </iframe>
    </div>
  </div>
  <p class="text-muted small mt-2">Relax with lofi beats while your subtitles generate üé∂</p>
</section>



    <!-- ABOUT -->
    <section id="about" class="mt-5">
      <div class="card glassy border-0">
        <div class="card-body">
          <h5>About Rixz</h5>
          <p class="text-muted mb-0">Rixz helps creators produce clean subtitles in seconds. Built with Flask + Bootstrap + a lot of ‚ù§Ô∏è.</p>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="mt-5">
      <div class="card glassy border-0">
        <div class="card-body">
          <h5>Contact</h5>
          <p class="text-muted mb-1">Have a feature idea or bug to report?</p>
          <p class="mb-0">üìß <a class="link-light" href="mailto:hello@rixz.example">hello@rixz.example</a></p>
        </div>
      </div>
    </section>

  </main>

  <footer class="text-center py-4 text-muted small">
    <i class="bi bi-lightning-charge text-warning"></i> Built with Flask ‚Ä¢ Bootstrap ‚Ä¢ Love
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Copy button
    document.getElementById('btn-copy')?.addEventListener('click', async (e) => {
      const ta = document.getElementById('srt-output');
      if (!ta || !ta.value.trim()) return;
      await navigator.clipboard.writeText(ta.value);
      const btn = e.target.closest("button");
      btn.innerHTML = '<i class="bi bi-check-lg me-1"></i>Copied!';
      setTimeout(()=> btn.innerHTML = '<i class="bi bi-clipboard me-1"></i><span>Copy</span>', 1200);
    });

    // Clear buttons
    function clearInput() { document.getElementById('script-input').value = ""; }
    function clearOutput() { document.getElementById('srt-output').value = ""; }

    // Mood-based music (YouTube ids)
    const MOODS = {
      lofi:   "jfKfPfyJRdk", // lofi girl
      focus:  "WPni755-Krg", // deep focus/ambient
      upbeat: "7NOSDKb0HlU"  // upbeat mix
    };
    const frame = document.getElementById('music-frame');
    document.getElementById('mood')?.addEventListener('change', (e) => {
      const id = MOODS[e.target.value] || MOODS.lofi;
      frame.src = `https://www.youtube.com/embed/${id}?autoplay=1`;
    });
  </script>
</body>
</html>
